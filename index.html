<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  let total = parseInt(localStorage.getItem('totalSticle')) || 0;

  const ctx = document.getElementById('chart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Țintă', 'Reciclate'],
      datasets: [{
        label: 'Sticle',
        data: [4000, total],
        backgroundColor: ['#d1d5db', '#10b981']
      }]
    },
    options: {
      responsive: false,
      scales: {
        y: {
          beginAtZero: true,
          max: 4000
        }
      }
    }
  });

  document.getElementById('total').textContent = total;

  function adauga() {
    const cantitate = prompt("Câte sticle ai reciclat?");
    const nr = parseInt(cantitate);
    if (!isNaN(nr) && nr > 0) {
      total += nr;
      localStorage.setItem('totalSticle', total); // Salvează progresul
      document.getElementById('total').textContent = total;
      chart.data.datasets[0].data[1] = total;
      chart.update();
    } else {
      alert("Te rog introdu un număr valid.");
    }
  }
</script>
